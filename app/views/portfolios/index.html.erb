<h1 class="mb-4">Portfolio Items</h1>

<%=link_to "Create new portfolio",new_portfolio_path if logged_in?(:site_admin)%>

<div class="album py-5 bg-light">
  <div class="container">
    <div class="row">

      <% @portfolios.each do |portfolio_item| %>
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
            <% if portfolio_item.thumb_image.present? %>
              <%= image_tag portfolio_item.thumb_image, class: "bd-placeholder-img card-img-top", alt: portfolio_item.title %>
            <% else %>
              <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder" preserveAspectRatio="xMidYMid slice" focusable="false">
                <title>No image</title>
                <rect width="100%" height="100%" fill="#55595c"></rect>
                <text x="50%" y="50%" fill="#eceeef" dy=".3em" text-anchor="middle">No Image</text>
              </svg>
            <% end %>

            <div class="card-body">
              <h5><%= link_to portfolio_item.title, portfolio_show_path(portfolio_item), class: "text-dark" %></h5>
              <p class="card-text"><%= truncate(portfolio_item.subtitle, length: 100) %></p>
              <p class="card-text"><%= truncate(portfolio_item.body, length: 150) %></p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <%= link_to 'View', portfolio_show_path(portfolio_item), class: "btn btn-sm btn-outline-secondary" %>
                  <% if logged_in?(:site_admin) %>
                    <%= link_to 'Edit', edit_portfolio_path(portfolio_item), class: "btn btn-sm btn-outline-secondary" %>
                    <%= button_to 'Delete', portfolio_path(portfolio_item), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-sm btn-danger ml-2' %>
                  <% end %>
                </div>

                <small class="text-muted"><%= portfolio_item.created_at.strftime("%b %d, %Y") %></small>
              </div>
            </div>
          </div>
        </div>
      <% end %>

    </div>
  </div>
</div>
